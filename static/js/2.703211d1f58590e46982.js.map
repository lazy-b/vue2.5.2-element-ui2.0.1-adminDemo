{"version":3,"sources":["webpack:///static/js/2.703211d1f58590e46982.js","webpack:///./src/components/main/views/ExcelUpload.vue?7528","webpack:///./src/components/main/views/ExcelUpload.vue?a7b9","webpack:///./src/components/main/views/ExcelUpload.vue","webpack:///./src/components/main/views/ExcelUpload.vue?e053","webpack:///src/components/main/views/ExcelUpload.vue","webpack:///./src/api/file.js"],"names":["webpackJsonp","+w9N","module","exports","__webpack_require__","content","i","locals","2vzV","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","DLJK","__webpack_exports__","injectStyle","ssrContext","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_4_0_vue_loader_lib_selector_type_script_index_0_ExcelUpload_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_4_0_vue_loader_lib_template_compiler_index_id_data_v_5a8d77a8_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_13_4_0_vue_loader_lib_selector_type_template_index_0_ExcelUpload_vue__","normalizeComponent","__vue_styles__","Component","JpBT","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","expand-trigger","options","model","callback","$$v","selectValue","expression","size","type","round","on","click","submitUpload","ref","drag","show-file-list","on-change","onChange","before-upload","beforeUpload","accept","auto-upload","action","multiple","slot","_l","fileInfo","index","_s","name","effect","upload","success","placement","class","icon","$event","preventDefault","deleteFile","formativeSize","staticRenderFns","esExports","PoLf","__WEBPACK_IMPORTED_MODULE_0__api_file__","data","fileInfos","afterUpload","label","children","methods","length","splice","fileList","some","$message","error","toFixed","_this","formData","FormData","append","uploadfileType","then","res","err","VX/p","uploadFile","params","__WEBPACK_IMPORTED_MODULE_0_axios___default","url","method","__WEBPACK_IMPORTED_MODULE_0_axios__","n"],"mappings":"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SLwFYgE,MKtFZ,SLyFUhE,MKvFV,ULwFUgE,MKvFV,KLwFUC,WACEjE,MKvFZ,iBLwFYgE,MKvFZ,SLyFYhE,MKvFZ,gBLwFYgE,MKrFZ,aLyFQhE,MKvFR,SLwFQgE,MKvFR,KLwFQC,WACEjE,MKvFV,QLwFUgE,MKvFV,QLwFUC,WACEjE,MKvFZ,SLwFYgE,MKvFZ,cLyFYhE,MKvFZ,QLwFYgE,MKvFZ,aLyFYhE,MKvFZ,aLwFYgE,MKvFZ,kBLyFYhE,MKvFZ,OLwFYgE,MKvFZ,YLyFYhE,MKvFZ,SLwFYgE,MKtFZ,gBLyFUhE,MKvFV,OLwFUgE,MKvFV,OLwFUC,WACEjE,MKvFZ,QLwFYgE,MKvFZ,cLyFYhE,MKvFZ,WLwFYgE,MKvFZ,iBLyFYhE,MKvFZ,QLwFYgE,MKvFZ,cLyFYhE,MKvFZ,eLwFYgE,MKvFZ,oBLyFYhE,MKvFZ,SLwFYgE,MKvFZ,eLyFYhE,MKvFZ,WLwFYgE,MKvFZ,mBLyFYhE,MKvFZ,SLwFYgE,MKvFZ,cLyFYhE,MKvFZ,SLwFYgE,MKvFZ,cLyFYhE,MKvFZ,cLwFYgE,MKvFZ,qBLyFYhE,MKvFZ,cLwFYgE,MKvFZ,qBLyFYhE,MKvFZ,kBLwFYgE,MKvFZ,2BLyFYhE,MKvFZ,SLwFYgE,MKvFZ,cLyFYhE,MKvFZ,OLwFYgE,MKvFZ,YLyFYhE,MKvFZ,OLwFYgE,MKtFZ,cLyFUhE,MKvFV,OLwFUgE,MKvFV,OLwFUC,WACEjE,MKvFZ,QLwFYgE,MKvFZ,aLyFYhE,MKvFZ,MLwFYgE,MKvFZ,WLyFYhE,MKvFZ,WLwFYgE,MKvFZ,iBLyFYhE,MKvFZ,OLwFYgE,MKvFZ,cLyFYhE,MKvFZ,aLwFYgE,MKvFZ,kBLyFYhE,MKvFZ,QLwFYgE,MKtFZ,eLyFUhE,MKvFV,SLwFUgE,MKvFV,SLwFUC,WACEjE,MKvFZ,QLwFYgE,MKvFZ,aLyFYhE,MKvFZ,ULwFYgE,MKvFZ,eLyFYhE,MKvFZ,ULwFYgE,MKvFZ,iBLyFYhE,MKvFZ,cLwFYgE,MKvFZ,kBLyFYhE,MKvFZ,eLwFYgE,MKtFZ,sBLyFUhE,MKvFV,aLwFUgE,MKvFV,aLwFUC,WACEjE,MKvFZ,OLwFYgE,MKvFZ,iBLyFYhE,MKvFZ,OLwFYgE,MKvFZ,aLyFYhE,MKvFZ,aLwFYgE,MKvFZ,mBLyFYhE,MKvFZ,WLwFYgE,MKvFZ,kBLyFYhE,MKvFZ,QLwFYgE,MKtFZ,gBLyFUhE,MKvFV,SLwFUgE,MKvFV,SLwFUC,WACEjE,MKvFZ,SLwFYgE,MKvFZ,eLyFYhE,MKvFZ,ULwFYgE,MKvFZ,iBLyFYhE,MKvFZ,ULwFYgE,MKvFZ,gBLyFYhE,MKvFZ,OLwFYgE,MKvFZ,YLyFYhE,MKvFZ,WLwFYgE,MKvFZ,iBLyFYhE,MKvFZ,WLwFYgE,MKrFZ,sBLyFQhE,MKvFR,SLwFQgE,MKvFR,KLwFQC,WACEjE,MKvFV,QLwFUgE,MKvFV,qBLyFUhE,MKvFV,SLwFUgE,MKvFV,qBLyFUhE,MKvFV,SLwFUgE,MKpFV,eL0FEE,SAEEX,WAAY,SAAoBhE,GAC9B,IAAK,GAAIR,GAAI,EAAGA,EAAI0B,KAAKqD,UAAUK,OAAQpF,IACrC0B,KAAKqD,UAAU/E,GAAGQ,KAAKuD,OAASvD,EAAKuD,MAAQrC,KAAKqD,UAAU/E,GAAGQ,KAAKiC,OAASjC,EAAKiC,MACpFf,KAAKqD,UAAUM,OAAOrF,EKxFhC,IL+FImD,SAAU,SAAkB3C,EAAM8E,GAGhC,GAAI1B,KAGUlC,MAAKqD,UAAUQ,KAAK,SAAU3B,GAC1C,MAAOA,GAASpD,KAAKuD,OAASvD,EAAKuD,MAAQH,EAASpD,KAAKiC,OAASjC,EKzF1EiC,OL0GQf,KAAK8D,SAASC,MKvFtB,mBL6EQ7B,EAASa,cAAgBjE,EAAKiC,KAAO,KAAO,MKzFpD,GAAAjC,EAAAiC,KAAA,WAAAiD,QAAA,GACA,MAAAlF,EAAAiC,KAAA,MAAAiD,QAAA,GACA,KLyFQ9B,EAASpD,KKvFjBA,ELyFQoD,EAASK,QKvFjB,ELyFQL,EAASM,SKtFjB,ELwFQxC,KAAKqD,UAAU5E,KKvFvByD,KL8FId,aAAc,WKxFlB,GAAA6C,GAAAjE,IL6FM,IAAIA,KAAKa,YAAY6C,OAAS,EA2B5B,IAAK,GAAIpF,GAAI,EAAGA,EAAI0B,KAAKqD,UAAUK,OAAQpF,KKpHnD,SAAAA,GL6FU,IAAK2F,EAAMZ,UAAU/E,GAAGkE,QKvFlC,CLyFY,GAAI0B,GAAW,GKvF3BC,SLwFYD,GAASE,OAAO,aAAcH,EAAMZ,UAAU/E,GKtF1DQ,MLyFYO,OAAO8D,EAA4D,GAAGe,GAAYG,eAAkBJ,EAAMpD,cAAeyD,KAAK,SAAUC,GAItIN,EAAMZ,UAAU/E,GAAGiE,QKvFjC,ELwFc0B,EAAMZ,UAAU/E,GAAGkE,SKvFjC,GLwFe,SAAUgC,GAEXP,EAAMZ,UAAU/E,GAAGiE,QKvFjC,ELwFc0B,EAAMZ,UAAU/E,GAAGkE,SKvFjC,MAjBAlE,OLoHQ0B,MAAK8D,SAASC,MK7FtB,gBLmGIpC,aAAc,SAAsB7C,QAiBlC2F,OACA,SAAUvG,EAAQgB,EAAqBd,GAE7C,YMrcO,SAASsG,GAAWtB,EAAMuB,GAC/B,MAAOC,MACLC,IAAK,uBACLC,OAAQ,OACR1B,KAAMc,SACNS,OAAQA,INicqBzF,EAAuB,EAAIwF,CMjd5D,IAAAK,GAAA3G,EAAA,QAAAwG,EAAAxG,EAAA4G,EAAAD","file":"static/js/2.703211d1f58590e46982.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ \"+w9N\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"2vzV\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"8bSs\")(\"c8a85168\", content, true);\n\n/***/ }),\n\n/***/ \"2vzV\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"BkJT\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \".fenix-upload[data-v-5a8d77a8]{position:absolute;background-color:#fff;padding:30px;width:360px;height:200px;left:0;right:0;top:20px;margin:auto}.el-cascader[data-v-5a8d77a8]{margin:10px 0;width:200px}.info-container[data-v-5a8d77a8]{border:1px dotted #ccc;margin:5px 0}.info-container div:first-child p[data-v-5a8d77a8]{margin:5px 0;text-indent:1em;font-size:20px;font-weight:700}.info-container div:nth-child(2) p[data-v-5a8d77a8]{text-align:center}.upload-before[data-v-5a8d77a8]{color:#fa5555}.upload-success[data-v-5a8d77a8]{color:#67c23a}.upload-failure[data-v-5a8d77a8]{color:#eb9e05}.fenix-upload button[data-v-5a8d77a8]{float:right}.fenix-tip[data-v-5a8d77a8]{color:red}\", \"\", {\"version\":3,\"sources\":[\"F:/demo/vueDemo/vue+vue-router+vuex+axios+element-ui+mock-demo/src/components/main/views/ExcelUpload.vue\"],\"names\":[],\"mappings\":\"AACA,+BACE,kBAAmB,AACnB,sBAAuB,AACvB,aAAc,AACd,YAAa,AACb,aAAc,AACd,OAAQ,AACR,QAAS,AACT,SAAU,AACV,WAAa,CACd,AACD,8BACE,cAAe,AACf,WAAa,CACd,AACD,iCACE,uBAAwB,AACxB,YAAc,CACf,AACD,mDACE,aAAc,AACd,gBAAiB,AACjB,eAAgB,AAChB,eAAiB,CAClB,AACD,oDACE,iBAAmB,CACpB,AACD,gCACE,aAAe,CAChB,AACD,iCACE,aAAe,CAChB,AACD,iCACE,aAAe,CAChB,AACD,sCACE,WAAa,CACd,AACD,4BACE,SAAW,CACZ\",\"file\":\"ExcelUpload.vue\",\"sourcesContent\":[\"\\n.fenix-upload[data-v-5a8d77a8] {\\n  position: absolute;\\n  background-color: #fff;\\n  padding: 30px;\\n  width: 360px;\\n  height: 200px;\\n  left: 0;\\n  right: 0;\\n  top: 20px;\\n  margin: auto;\\n}\\n.el-cascader[data-v-5a8d77a8] {\\n  margin: 10px 0;\\n  width: 200px;\\n}\\n.info-container[data-v-5a8d77a8] {\\n  border: 1px dotted #ccc;\\n  margin: 5px 0;\\n}\\n.info-container div:nth-child(1) p[data-v-5a8d77a8]{\\n  margin: 5px 0;\\n  text-indent: 1em;\\n  font-size: 20px;\\n  font-weight: 700;\\n}\\n.info-container div:nth-child(2) p[data-v-5a8d77a8]{\\n  text-align: center;\\n}\\n.upload-before[data-v-5a8d77a8] {\\n  color: #FA5555;\\n}\\n.upload-success[data-v-5a8d77a8] {\\n  color: #67C23A;\\n}\\n.upload-failure[data-v-5a8d77a8] {\\n  color: #EB9E05;\\n}\\n.fenix-upload button[data-v-5a8d77a8] {\\n  float: right;\\n}\\n.fenix-tip[data-v-5a8d77a8] {\\n  color: red;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"DLJK\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_4_0_vue_loader_lib_selector_type_script_index_0_ExcelUpload_vue__ = __webpack_require__(\"PoLf\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_4_0_vue_loader_lib_template_compiler_index_id_data_v_5a8d77a8_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_13_4_0_vue_loader_lib_selector_type_template_index_0_ExcelUpload_vue__ = __webpack_require__(\"JpBT\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"+w9N\")\n}\nvar normalizeComponent = __webpack_require__(\"0HdQ\")\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5a8d77a8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_4_0_vue_loader_lib_selector_type_script_index_0_ExcelUpload_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_4_0_vue_loader_lib_template_compiler_index_id_data_v_5a8d77a8_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_13_4_0_vue_loader_lib_selector_type_template_index_0_ExcelUpload_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"JpBT\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fenix-upload\"},[_c('el-form',[_c('div',{staticClass:\"fenix-tip\"},[_vm._v(\"请先选择上传EXCEL的类型：\")]),_vm._v(\" \"),_c('el-cascader',{attrs:{\"expand-trigger\":\"hover\",\"options\":_vm.options},model:{value:(_vm.selectValue),callback:function ($$v) {_vm.selectValue=$$v},expression:\"selectValue\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\",\"round\":\"\"},on:{\"click\":_vm.submitUpload}},[_vm._v(\"\\n      上传到服务器\\n    \")]),_vm._v(\" \"),_c('el-upload',{ref:\"uploadFiles\",attrs:{\"drag\":\"\",\"show-file-list\":false,\"on-change\":_vm.onChange,\"before-upload\":_vm.beforeUpload,\"accept\":\".xls,.xlsx\",\"auto-upload\":false,\"action\":\"\",\"multiple\":\"\"}},[_c('i',{staticClass:\"el-icon-upload\"}),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])]),_vm._v(\" \"),_c('div',{staticClass:\"fenix-tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传xls/xlsx文件\")])])],1),_vm._v(\" \"),_c('div',{staticClass:\"fileInfo\"},_vm._l((_vm.fileInfos),function(fileInfo,index){return _c('div',{staticClass:\"info-container\"},[_c('div',[_c('p',[_vm._v(_vm._s(index + 1)+\" 、\"+_vm._s(fileInfo.file.name)+\" \")])]),_vm._v(\" \"),_c('div',[_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":fileInfo.upload ?\n              (fileInfo.success ?\n                \"该文件上传成功\" :\n                \"该文件上传失败，点击此处删除或者点击上传按钮继续尝试\") :\n              \"点击按钮取消该文件上传\",\"placement\":\"top\"}},[_c('el-button',{class:fileInfo.upload ? (fileInfo.success ? \"upload-success\" : \"upload-failure\") : \"upload-before\",attrs:{\"size\":\"mini\",\"round\":\"\",\"type\":\"text\",\"icon\":fileInfo.upload ? (fileInfo.success ? \"el-icon-success\" : \"el-icon-warning\") : \"el-icon-circle-close\"},on:{\"click\":function($event){$event.preventDefault();fileInfo.success ? \"\" : _vm.deleteFile(fileInfo.file)}}})],1),_vm._v(\" \"),_c('p',[_vm._v(\"文件大小：\"+_vm._s(fileInfo.formativeSize)+\" \")])],1)])}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"PoLf\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__api_file__ = __webpack_require__(\"VX/p\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {\n      fileInfos: [],\n      success: false,\n      afterUpload: false,\n      selectValue: [],\n      options: [{\n        value: 'zhinan',\n        label: '指南',\n        children: [{\n          value: 'shejiyuanze',\n          label: '设计原则',\n          children: [{\n            value: 'yizhi',\n            label: '一致'\n          }, {\n            value: 'fankui',\n            label: '反馈'\n          }, {\n            value: 'xiaolv',\n            label: '效率'\n          }, {\n            value: 'kekong',\n            label: '可控'\n          }]\n        }, {\n          value: 'daohang',\n          label: '导航',\n          children: [{\n            value: 'cexiangdaohang',\n            label: '侧向导航'\n          }, {\n            value: 'dingbudaohang',\n            label: '顶部导航'\n          }]\n        }]\n      }, {\n        value: 'zujian',\n        label: '组件',\n        children: [{\n          value: 'basic',\n          label: 'Basic',\n          children: [{\n            value: 'layout',\n            label: 'Layout 布局'\n          }, {\n            value: 'color',\n            label: 'Color 色彩'\n          }, {\n            value: 'typography',\n            label: 'Typography 字体'\n          }, {\n            value: 'icon',\n            label: 'Icon 图标'\n          }, {\n            value: 'button',\n            label: 'Button 按钮'\n          }]\n        }, {\n          value: 'form',\n          label: 'Form',\n          children: [{\n            value: 'radio',\n            label: 'Radio 单选框'\n          }, {\n            value: 'checkbox',\n            label: 'Checkbox 多选框'\n          }, {\n            value: 'input',\n            label: 'Input 输入框'\n          }, {\n            value: 'input-number',\n            label: 'InputNumber 计数器'\n          }, {\n            value: 'select',\n            label: 'Select 选择器'\n          }, {\n            value: 'cascader',\n            label: 'Cascader 级联选择器'\n          }, {\n            value: 'switch',\n            label: 'Switch 开关'\n          }, {\n            value: 'slider',\n            label: 'Slider 滑块'\n          }, {\n            value: 'time-picker',\n            label: 'TimePicker 时间选择器'\n          }, {\n            value: 'date-picker',\n            label: 'DatePicker 日期选择器'\n          }, {\n            value: 'datetime-picker',\n            label: 'DateTimePicker 日期时间选择器'\n          }, {\n            value: 'upload',\n            label: 'Upload 上传'\n          }, {\n            value: 'rate',\n            label: 'Rate 评分'\n          }, {\n            value: 'form',\n            label: 'Form 表单'\n          }]\n        }, {\n          value: 'data',\n          label: 'Data',\n          children: [{\n            value: 'table',\n            label: 'Table 表格'\n          }, {\n            value: 'tag',\n            label: 'Tag 标签'\n          }, {\n            value: 'progress',\n            label: 'Progress 进度条'\n          }, {\n            value: 'tree',\n            label: 'Tree 树形控件'\n          }, {\n            value: 'pagination',\n            label: 'Pagination 分页'\n          }, {\n            value: 'badge',\n            label: 'Badge 标记'\n          }]\n        }, {\n          value: 'notice',\n          label: 'Notice',\n          children: [{\n            value: 'alert',\n            label: 'Alert 警告'\n          }, {\n            value: 'loading',\n            label: 'Loading 加载'\n          }, {\n            value: 'message',\n            label: 'Message 消息提示'\n          }, {\n            value: 'message-box',\n            label: 'MessageBox 弹框'\n          }, {\n            value: 'notification',\n            label: 'Notification 通知'\n          }]\n        }, {\n          value: 'navigation',\n          label: 'Navigation',\n          children: [{\n            value: 'menu',\n            label: 'NavMenu 导航菜单'\n          }, {\n            value: 'tabs',\n            label: 'Tabs 标签页'\n          }, {\n            value: 'breadcrumb',\n            label: 'Breadcrumb 面包屑'\n          }, {\n            value: 'dropdown',\n            label: 'Dropdown 下拉菜单'\n          }, {\n            value: 'steps',\n            label: 'Steps 步骤条'\n          }]\n        }, {\n          value: 'others',\n          label: 'Others',\n          children: [{\n            value: 'dialog',\n            label: 'Dialog 对话框'\n          }, {\n            value: 'tooltip',\n            label: 'Tooltip 文字提示'\n          }, {\n            value: 'popover',\n            label: 'Popover 弹出框'\n          }, {\n            value: 'card',\n            label: 'Card 卡片'\n          }, {\n            value: 'carousel',\n            label: 'Carousel 走马灯'\n          }, {\n            value: 'collapse',\n            label: 'Collapse 折叠面板'\n          }]\n        }]\n      }, {\n        value: 'ziyuan',\n        label: '资源',\n        children: [{\n          value: 'axure',\n          label: 'Axure Components'\n        }, {\n          value: 'sketch',\n          label: 'Sketch Templates'\n        }, {\n          value: 'jiaohu',\n          label: '组件交互文档'\n        }]\n      }]\n    };\n  },\n\n  methods: {\n    // 点击删除按钮，删除fileInfos中对应该文件的项\n    deleteFile: function deleteFile(file) {\n      for (var i = 0; i < this.fileInfos.length; i++) {\n        if (this.fileInfos[i].file.name === file.name && this.fileInfos[i].file.size === file.size) {\n          this.fileInfos.splice(i, 1);\n        }\n      }\n    },\n\n    // 点击新增文件区域，在fileInfos中增加对应的文件信息\n    // 自定义事件无法获取fileList数据，故放弃fileList进行操作\n    onChange: function onChange(file, fileList) {\n      // window.testfile = file;\n      // window.testfilelist = fileList;\n      var fileInfo = {};\n\n      // 判断fileInfos中是否存在该文件\n      var isExist = this.fileInfos.some(function (fileInfo) {\n        return fileInfo.file.name === file.name && fileInfo.file.size === file.size;\n      });\n\n      // 如果集合中已经有了和传入file相同的文件，则将刚传入的file删除\n      // 否则将该文件信息展示出来\n      if (!isExist) {\n        // 格式化之后的文件大小\n        fileInfo.formativeSize = file.size / 1024 / 1024 >= 1 ? (file.size / 1024 / 1024).toFixed(2) + 'MB' : (file.size / 1024).toFixed(2) + 'KB';\n        // 文件对象\n        fileInfo.file = file;\n        // 文件是否已经上传\n        fileInfo.upload = false;\n        // 文件是否上传成功\n        fileInfo.success = false;\n\n        this.fileInfos.push(fileInfo);\n      } else {\n        this.$message.error('相同文件已存在，请确认、、、');\n      }\n    },\n\n    // 点击文件上传按钮\n    submitUpload: function submitUpload() {\n      var _this = this;\n\n      // this.$refs.uploadFiles.submit();\n      // 在已经选择了文件类型的情况下才进行上传操作，否则弹出提示框\n      if (this.selectValue.length > 0) {\n        var _loop = function _loop(i) {\n\n          // 当该文件没有被上传或者上传失败时可以发起上传请求\n          if (!_this.fileInfos[i].success) {\n            // 使用FormData对象将文件序列化\n            var formData = new FormData();\n            formData.append('uploadfile', _this.fileInfos[i].file);\n\n            // 调用文件上传api\n            Object(__WEBPACK_IMPORTED_MODULE_0__api_file__[\"a\" /* uploadFile */])(formData, { 'uploadfileType': _this.selectValue }).then(function (res) {\n              // console.log(res.data.uploadfileType, res.data.uploadfile, res.data.msg)\n              // console.log('该文件上传成功')\n              // 该文件上传成功\n              _this.fileInfos[i].upload = true;\n              _this.fileInfos[i].success = true;\n            }, function (err) {\n              // 该文件上传失败\n              _this.fileInfos[i].upload = true;\n              _this.fileInfos[i].success = false;\n              // console.log('该文件上传失败')\n            });\n          }\n        };\n\n        // 循环遍历fileInfos，分别提交包含的文件\n        // 这样能够实现对单个文件上传情况的控制\n        for (var i = 0; i < this.fileInfos.length; i++) {\n          _loop(i);\n        }\n      } else {\n        this.$message.error('必须选择文件类型！！！');\n      }\n    },\n\n    // 文件上传前一个一个的进行最后的验证\n    // 暂时没有这个需求\n    beforeUpload: function beforeUpload(file) {\n      // const isJPG = file.type === 'image/jpeg';\n      // const isLt2M = file.size / 1024 / 1024 < 2;\n      // window.test = file;\n      // if (!isJPG) {\n      //   this.$message.error('上传头像图片只能是 JPG 格式!');\n      // }\n      // if (!isLt2M) {\n      //   this.$message.error('上传头像图片大小不能超过 2MB!');\n      // }\n      // return isJPG && isLt2M;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"VX/p\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = uploadFile;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_axios__ = __webpack_require__(\"yEoQ\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_axios__);\n/*\r\n* @Author: yang\r\n* @Date:   2017-11-01 20:59:26\r\n* @Last Modified by:   lazy1993\r\n* @Last Modified time: 2017-11-03 08:53:59\r\n*/\n\n\n// 文件上传\n// data：被formData序列化的文件主体\n// params：随文件发送的参数\nfunction uploadFile(data, params) {\n  return __WEBPACK_IMPORTED_MODULE_0_axios___default()({\n    url: '../../test/upload.do',\n    method: 'post',\n    data: formData,\n    params: params\n  });\n}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/2.703211d1f58590e46982.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/_css-loader@0.28.7@css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.4.0@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5a8d77a8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_vue-loader@13.4.0@vue-loader/lib/selector.js?type=styles&index=0!./ExcelUpload.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/_vue-style-loader@3.0.3@vue-style-loader/lib/addStylesClient.js\")(\"c8a85168\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/_vue-style-loader@3.0.3@vue-style-loader!./node_modules/_css-loader@0.28.7@css-loader?{\"minimize\":true,\"sourceMap\":true}!./node_modules/_vue-loader@13.4.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-5a8d77a8\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/_vue-loader@13.4.0@vue-loader/lib/selector.js?type=styles&index=0!./src/components/main/views/ExcelUpload.vue\n// module id = +w9N\n// module chunks = 2","exports = module.exports = require(\"../../../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".fenix-upload[data-v-5a8d77a8]{position:absolute;background-color:#fff;padding:30px;width:360px;height:200px;left:0;right:0;top:20px;margin:auto}.el-cascader[data-v-5a8d77a8]{margin:10px 0;width:200px}.info-container[data-v-5a8d77a8]{border:1px dotted #ccc;margin:5px 0}.info-container div:first-child p[data-v-5a8d77a8]{margin:5px 0;text-indent:1em;font-size:20px;font-weight:700}.info-container div:nth-child(2) p[data-v-5a8d77a8]{text-align:center}.upload-before[data-v-5a8d77a8]{color:#fa5555}.upload-success[data-v-5a8d77a8]{color:#67c23a}.upload-failure[data-v-5a8d77a8]{color:#eb9e05}.fenix-upload button[data-v-5a8d77a8]{float:right}.fenix-tip[data-v-5a8d77a8]{color:red}\", \"\", {\"version\":3,\"sources\":[\"F:/demo/vueDemo/vue+vue-router+vuex+axios+element-ui+mock-demo/src/components/main/views/ExcelUpload.vue\"],\"names\":[],\"mappings\":\"AACA,+BACE,kBAAmB,AACnB,sBAAuB,AACvB,aAAc,AACd,YAAa,AACb,aAAc,AACd,OAAQ,AACR,QAAS,AACT,SAAU,AACV,WAAa,CACd,AACD,8BACE,cAAe,AACf,WAAa,CACd,AACD,iCACE,uBAAwB,AACxB,YAAc,CACf,AACD,mDACE,aAAc,AACd,gBAAiB,AACjB,eAAgB,AAChB,eAAiB,CAClB,AACD,oDACE,iBAAmB,CACpB,AACD,gCACE,aAAe,CAChB,AACD,iCACE,aAAe,CAChB,AACD,iCACE,aAAe,CAChB,AACD,sCACE,WAAa,CACd,AACD,4BACE,SAAW,CACZ\",\"file\":\"ExcelUpload.vue\",\"sourcesContent\":[\"\\n.fenix-upload[data-v-5a8d77a8] {\\n  position: absolute;\\n  background-color: #fff;\\n  padding: 30px;\\n  width: 360px;\\n  height: 200px;\\n  left: 0;\\n  right: 0;\\n  top: 20px;\\n  margin: auto;\\n}\\n.el-cascader[data-v-5a8d77a8] {\\n  margin: 10px 0;\\n  width: 200px;\\n}\\n.info-container[data-v-5a8d77a8] {\\n  border: 1px dotted #ccc;\\n  margin: 5px 0;\\n}\\n.info-container div:nth-child(1) p[data-v-5a8d77a8]{\\n  margin: 5px 0;\\n  text-indent: 1em;\\n  font-size: 20px;\\n  font-weight: 700;\\n}\\n.info-container div:nth-child(2) p[data-v-5a8d77a8]{\\n  text-align: center;\\n}\\n.upload-before[data-v-5a8d77a8] {\\n  color: #FA5555;\\n}\\n.upload-success[data-v-5a8d77a8] {\\n  color: #67C23A;\\n}\\n.upload-failure[data-v-5a8d77a8] {\\n  color: #EB9E05;\\n}\\n.fenix-upload button[data-v-5a8d77a8] {\\n  float: right;\\n}\\n.fenix-tip[data-v-5a8d77a8] {\\n  color: red;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.7@css-loader?{\"minimize\":true,\"sourceMap\":true}!./node_modules/_vue-loader@13.4.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-5a8d77a8\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/_vue-loader@13.4.0@vue-loader/lib/selector.js?type=styles&index=0!./src/components/main/views/ExcelUpload.vue\n// module id = 2vzV\n// module chunks = 2","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.4.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5a8d77a8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_vue-loader@13.4.0@vue-loader/lib/selector?type=styles&index=0!./ExcelUpload.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.4.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.4.0@vue-loader/lib/selector?type=script&index=0!./ExcelUpload.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.4.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5a8d77a8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.4.0@vue-loader/lib/selector?type=template&index=0!./ExcelUpload.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5a8d77a8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/main/views/ExcelUpload.vue\n// module id = DLJK\n// module chunks = 2","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fenix-upload\"},[_c('el-form',[_c('div',{staticClass:\"fenix-tip\"},[_vm._v(\"请先选择上传EXCEL的类型：\")]),_vm._v(\" \"),_c('el-cascader',{attrs:{\"expand-trigger\":\"hover\",\"options\":_vm.options},model:{value:(_vm.selectValue),callback:function ($$v) {_vm.selectValue=$$v},expression:\"selectValue\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\",\"round\":\"\"},on:{\"click\":_vm.submitUpload}},[_vm._v(\"\\n      上传到服务器\\n    \")]),_vm._v(\" \"),_c('el-upload',{ref:\"uploadFiles\",attrs:{\"drag\":\"\",\"show-file-list\":false,\"on-change\":_vm.onChange,\"before-upload\":_vm.beforeUpload,\"accept\":\".xls,.xlsx\",\"auto-upload\":false,\"action\":\"\",\"multiple\":\"\"}},[_c('i',{staticClass:\"el-icon-upload\"}),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])]),_vm._v(\" \"),_c('div',{staticClass:\"fenix-tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传xls/xlsx文件\")])])],1),_vm._v(\" \"),_c('div',{staticClass:\"fileInfo\"},_vm._l((_vm.fileInfos),function(fileInfo,index){return _c('div',{staticClass:\"info-container\"},[_c('div',[_c('p',[_vm._v(_vm._s(index + 1)+\" 、\"+_vm._s(fileInfo.file.name)+\" \")])]),_vm._v(\" \"),_c('div',[_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":fileInfo.upload ?\n              (fileInfo.success ?\n                \"该文件上传成功\" :\n                \"该文件上传失败，点击此处删除或者点击上传按钮继续尝试\") :\n              \"点击按钮取消该文件上传\",\"placement\":\"top\"}},[_c('el-button',{class:fileInfo.upload ? (fileInfo.success ? \"upload-success\" : \"upload-failure\") : \"upload-before\",attrs:{\"size\":\"mini\",\"round\":\"\",\"type\":\"text\",\"icon\":fileInfo.upload ? (fileInfo.success ? \"el-icon-success\" : \"el-icon-warning\") : \"el-icon-circle-close\"},on:{\"click\":function($event){$event.preventDefault();fileInfo.success ? \"\" : _vm.deleteFile(fileInfo.file)}}})],1),_vm._v(\" \"),_c('p',[_vm._v(\"文件大小：\"+_vm._s(fileInfo.formativeSize)+\" \")])],1)])}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.4.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-5a8d77a8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.4.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/main/views/ExcelUpload.vue\n// module id = JpBT\n// module chunks = 2","<template>\r\n  <div class=\"fenix-upload\">\r\n    <el-form>\r\n      <div class=\"fenix-tip\">请先选择上传EXCEL的类型：</div>\r\n      <el-cascader\r\n        expand-trigger=\"hover\"\r\n        :options=\"options\"\r\n        v-model=\"selectValue\">\r\n      </el-cascader>\r\n      <el-button\r\n        size=\"small\"\r\n        type=\"success\"\r\n        round\r\n        @click=\"submitUpload\">\r\n        上传到服务器\r\n      </el-button>\r\n      <!-- data为上传时附带的参数 -->\r\n      <el-upload\r\n        class=\"\"\r\n        drag\r\n        ref=\"uploadFiles\"\r\n        :show-file-list='false'\r\n        :on-change='onChange'\r\n        :before-upload=\"beforeUpload\"\r\n        accept=\".xls,.xlsx\"\r\n        :auto-upload='false'\r\n        action=\"\"\r\n        multiple>\r\n        <i class=\"el-icon-upload\"></i>\r\n        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n        <div class=\"fenix-tip\" slot=\"tip\">只能上传xls/xlsx文件</div>\r\n      </el-upload>\r\n    </el-form>\r\n    <div class=\"fileInfo\">\r\n      <div\r\n        class=\"info-container\"\r\n        v-for='(fileInfo, index) in fileInfos'>\r\n          <div>\r\n            <p>{{index + 1}} 、{{fileInfo.file.name}} </p>\r\n          </div>\r\n          <div>\r\n            <el-tooltip\r\n              effect=\"dark\"\r\n              :content='fileInfo.upload ?\r\n                (fileInfo.success ?\r\n                  \"该文件上传成功\" :\r\n                  \"该文件上传失败，点击此处删除或者点击上传按钮继续尝试\") :\r\n                \"点击按钮取消该文件上传\" '\r\n              placement=\"top\">\r\n              <!-- :type='afterUpload ? \"success\" : \"warning\"' -->\r\n              <el-button\r\n                @click.prevent='fileInfo.success ? \"\" : deleteFile(fileInfo.file)'\r\n                size=\"mini\"\r\n                :class='fileInfo.upload ? (fileInfo.success ? \"upload-success\" : \"upload-failure\") : \"upload-before\"'\r\n                round\r\n                type=\"text\"\r\n                :icon='fileInfo.upload ? (fileInfo.success ? \"el-icon-success\" : \"el-icon-warning\") : \"el-icon-circle-close\"'>\r\n              </el-button>\r\n            </el-tooltip>\r\n            <p>文件大小：{{fileInfo.formativeSize}} </p>\r\n          </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { uploadFile } from '@/api/file'\r\nexport default {\r\n  data () {\r\n    return {\r\n      fileInfos: [],\r\n      success: false,\r\n      afterUpload: false,\r\n      selectValue: [],\r\n      options: [{\r\n        value: 'zhinan',\r\n        label: '指南',\r\n        children: [{\r\n          value: 'shejiyuanze',\r\n          label: '设计原则',\r\n          children: [{\r\n            value: 'yizhi',\r\n            label: '一致'\r\n          }, {\r\n            value: 'fankui',\r\n            label: '反馈'\r\n          }, {\r\n            value: 'xiaolv',\r\n            label: '效率'\r\n          }, {\r\n            value: 'kekong',\r\n            label: '可控'\r\n          }]\r\n        }, {\r\n          value: 'daohang',\r\n          label: '导航',\r\n          children: [{\r\n            value: 'cexiangdaohang',\r\n            label: '侧向导航'\r\n          }, {\r\n            value: 'dingbudaohang',\r\n            label: '顶部导航'\r\n          }]\r\n        }]\r\n        }, {\r\n          value: 'zujian',\r\n          label: '组件',\r\n          children: [{\r\n            value: 'basic',\r\n            label: 'Basic',\r\n            children: [{\r\n              value: 'layout',\r\n              label: 'Layout 布局'\r\n            }, {\r\n              value: 'color',\r\n              label: 'Color 色彩'\r\n            }, {\r\n              value: 'typography',\r\n              label: 'Typography 字体'\r\n            }, {\r\n              value: 'icon',\r\n              label: 'Icon 图标'\r\n            }, {\r\n              value: 'button',\r\n              label: 'Button 按钮'\r\n            }]\r\n          }, {\r\n            value: 'form',\r\n            label: 'Form',\r\n            children: [{\r\n              value: 'radio',\r\n              label: 'Radio 单选框'\r\n            }, {\r\n              value: 'checkbox',\r\n              label: 'Checkbox 多选框'\r\n            }, {\r\n              value: 'input',\r\n              label: 'Input 输入框'\r\n            }, {\r\n              value: 'input-number',\r\n              label: 'InputNumber 计数器'\r\n            }, {\r\n              value: 'select',\r\n              label: 'Select 选择器'\r\n            }, {\r\n              value: 'cascader',\r\n              label: 'Cascader 级联选择器'\r\n            }, {\r\n              value: 'switch',\r\n              label: 'Switch 开关'\r\n            }, {\r\n              value: 'slider',\r\n              label: 'Slider 滑块'\r\n            }, {\r\n              value: 'time-picker',\r\n              label: 'TimePicker 时间选择器'\r\n            }, {\r\n              value: 'date-picker',\r\n              label: 'DatePicker 日期选择器'\r\n            }, {\r\n              value: 'datetime-picker',\r\n              label: 'DateTimePicker 日期时间选择器'\r\n            }, {\r\n              value: 'upload',\r\n              label: 'Upload 上传'\r\n            }, {\r\n              value: 'rate',\r\n              label: 'Rate 评分'\r\n            }, {\r\n              value: 'form',\r\n              label: 'Form 表单'\r\n            }]\r\n          }, {\r\n            value: 'data',\r\n            label: 'Data',\r\n            children: [{\r\n              value: 'table',\r\n              label: 'Table 表格'\r\n            }, {\r\n              value: 'tag',\r\n              label: 'Tag 标签'\r\n            }, {\r\n              value: 'progress',\r\n              label: 'Progress 进度条'\r\n            }, {\r\n              value: 'tree',\r\n              label: 'Tree 树形控件'\r\n            }, {\r\n              value: 'pagination',\r\n              label: 'Pagination 分页'\r\n            }, {\r\n              value: 'badge',\r\n              label: 'Badge 标记'\r\n            }]\r\n          }, {\r\n            value: 'notice',\r\n            label: 'Notice',\r\n            children: [{\r\n              value: 'alert',\r\n              label: 'Alert 警告'\r\n            }, {\r\n              value: 'loading',\r\n              label: 'Loading 加载'\r\n            }, {\r\n              value: 'message',\r\n              label: 'Message 消息提示'\r\n            }, {\r\n              value: 'message-box',\r\n              label: 'MessageBox 弹框'\r\n            }, {\r\n              value: 'notification',\r\n              label: 'Notification 通知'\r\n            }]\r\n          }, {\r\n            value: 'navigation',\r\n            label: 'Navigation',\r\n            children: [{\r\n              value: 'menu',\r\n              label: 'NavMenu 导航菜单'\r\n            }, {\r\n              value: 'tabs',\r\n              label: 'Tabs 标签页'\r\n            }, {\r\n              value: 'breadcrumb',\r\n              label: 'Breadcrumb 面包屑'\r\n            }, {\r\n              value: 'dropdown',\r\n              label: 'Dropdown 下拉菜单'\r\n            }, {\r\n              value: 'steps',\r\n              label: 'Steps 步骤条'\r\n            }]\r\n          }, {\r\n            value: 'others',\r\n            label: 'Others',\r\n            children: [{\r\n              value: 'dialog',\r\n              label: 'Dialog 对话框'\r\n            }, {\r\n              value: 'tooltip',\r\n              label: 'Tooltip 文字提示'\r\n            }, {\r\n              value: 'popover',\r\n              label: 'Popover 弹出框'\r\n            }, {\r\n              value: 'card',\r\n              label: 'Card 卡片'\r\n            }, {\r\n              value: 'carousel',\r\n              label: 'Carousel 走马灯'\r\n            }, {\r\n              value: 'collapse',\r\n              label: 'Collapse 折叠面板'\r\n            }]\r\n          }]\r\n        }, {\r\n          value: 'ziyuan',\r\n          label: '资源',\r\n          children: [{\r\n            value: 'axure',\r\n            label: 'Axure Components'\r\n          }, {\r\n            value: 'sketch',\r\n            label: 'Sketch Templates'\r\n          }, {\r\n            value: 'jiaohu',\r\n            label: '组件交互文档'\r\n          }]\r\n      }]\r\n    };\r\n  },\r\n  methods: {\r\n    // 点击删除按钮，删除fileInfos中对应该文件的项\r\n    deleteFile(file) {\r\n      for (let i = 0; i < this.fileInfos.length; i++) {\r\n        if (this.fileInfos[i].file.name === file.name && this.fileInfos[i].file.size === file.size) {\r\n          this.fileInfos.splice(i, 1);\r\n        }\r\n      }\r\n    },\r\n    // 点击新增文件区域，在fileInfos中增加对应的文件信息\r\n    // 自定义事件无法获取fileList数据，故放弃fileList进行操作\r\n    onChange(file, fileList) {\r\n      // window.testfile = file;\r\n      // window.testfilelist = fileList;\r\n      let fileInfo = {};\r\n\r\n      // 判断fileInfos中是否存在该文件\r\n      const isExist = this.fileInfos.some(function(fileInfo) {\r\n        return fileInfo.file.name === file.name && fileInfo.file.size === file.size;\r\n      });\r\n\r\n      // 如果集合中已经有了和传入file相同的文件，则将刚传入的file删除\r\n      // 否则将该文件信息展示出来\r\n      if (!isExist) {\r\n        // 格式化之后的文件大小\r\n        fileInfo.formativeSize = file.size/1024/1024 >= 1 ?\r\n                        (file.size/1024/1024).toFixed(2) + 'MB' :\r\n                        (file.size/1024).toFixed(2) + 'KB';\r\n        // 文件对象\r\n        fileInfo.file = file;\r\n        // 文件是否已经上传\r\n        fileInfo.upload = false;\r\n        // 文件是否上传成功\r\n        fileInfo.success = false;\r\n\r\n        this.fileInfos.push(fileInfo);\r\n      } else {\r\n        this.$message.error('相同文件已存在，请确认、、、');\r\n      }\r\n    },\r\n    // 点击文件上传按钮\r\n    submitUpload() {\r\n      // this.$refs.uploadFiles.submit();\r\n      // 在已经选择了文件类型的情况下才进行上传操作，否则弹出提示框\r\n      if (this.selectValue.length > 0) {\r\n\r\n        // 循环遍历fileInfos，分别提交包含的文件\r\n        // 这样能够实现对单个文件上传情况的控制\r\n        for (let i = 0; i < this.fileInfos.length; i++) {\r\n\r\n          // 当该文件没有被上传或者上传失败时可以发起上传请求\r\n          if (!this.fileInfos[i].success) {\r\n            // 使用FormData对象将文件序列化\r\n            let formData = new FormData();\r\n            formData.append('uploadfile', this.fileInfos[i].file);\r\n\r\n            // 调用文件上传api\r\n            uploadFile(formData, {'uploadfileType' : this.selectValue}).then(res => {\r\n              // console.log(res.data.uploadfileType, res.data.uploadfile, res.data.msg)\r\n              // console.log('该文件上传成功')\r\n              // 该文件上传成功\r\n              this.fileInfos[i].upload = true;\r\n              this.fileInfos[i].success = true;\r\n            }, err => {\r\n              // 该文件上传失败\r\n              this.fileInfos[i].upload = true;\r\n              this.fileInfos[i].success = false;\r\n              // console.log('该文件上传失败')\r\n            });\r\n          }\r\n        }\r\n      } else {\r\n        this.$message.error('必须选择文件类型！！！');\r\n      }\r\n    },\r\n    // 文件上传前一个一个的进行最后的验证\r\n    // 暂时没有这个需求\r\n    beforeUpload(file) {\r\n      // const isJPG = file.type === 'image/jpeg';\r\n      // const isLt2M = file.size / 1024 / 1024 < 2;\r\n      // window.test = file;\r\n      // if (!isJPG) {\r\n      //   this.$message.error('上传头像图片只能是 JPG 格式!');\r\n      // }\r\n      // if (!isLt2M) {\r\n      //   this.$message.error('上传头像图片大小不能超过 2MB!');\r\n      // }\r\n      // return isJPG && isLt2M;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n  .fenix-upload {\r\n    position: absolute;\r\n    background-color: #fff;\r\n    padding: 30px;\r\n    width: 360px;\r\n    height: 200px;\r\n    left: 0;\r\n    right: 0;\r\n    top: 20px;\r\n    margin: auto;\r\n  }\r\n\r\n  .el-cascader {\r\n    margin: 10px 0;\r\n    width: 200px;\r\n  }\r\n  .info-container {\r\n    border: 1px dotted #ccc;\r\n    margin: 5px 0;\r\n  }\r\n\r\n  .info-container div:nth-child(1) p{\r\n    margin: 5px 0;\r\n    text-indent: 1em;\r\n    font-size: 20px;\r\n    font-weight: 700;\r\n  }\r\n  .info-container div:nth-child(2) p{\r\n    text-align: center;\r\n  }\r\n\r\n  .upload-before {\r\n    color: #FA5555;\r\n  }\r\n  .upload-success {\r\n    color: #67C23A;\r\n  }\r\n  .upload-failure {\r\n    color: #EB9E05;\r\n  }\r\n\r\n  .fenix-upload button {\r\n    float: right;\r\n  }\r\n\r\n  .fenix-tip {\r\n    color: red;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/main/views/ExcelUpload.vue","/*\r\n* @Author: yang\r\n* @Date:   2017-11-01 20:59:26\r\n* @Last Modified by:   lazy1993\r\n* @Last Modified time: 2017-11-03 08:53:59\r\n*/\r\nimport axios from 'axios';\r\n\r\n// 文件上传\r\n// data：被formData序列化的文件主体\r\n// params：随文件发送的参数\r\nexport function uploadFile(data, params) {\r\n  return axios({\r\n    url: '../../test/upload.do',\r\n    method: 'post',\r\n    data: formData,\r\n    params: params\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/file.js"],"sourceRoot":""}