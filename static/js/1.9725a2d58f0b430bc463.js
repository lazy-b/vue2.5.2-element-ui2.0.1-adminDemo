webpackJsonp([1],{"8ZxV":function(e,t,a){"use strict";a.d(t,"a",function(){return o});var o={name:[],region:[{required:!0,message:"请选择活动区域",trigger:"change"}],date1:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],date2:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],type:[{type:"array",required:!0,message:"请至少选择一个活动性质",trigger:"change"}],resource:[{required:!0,message:"请选择活动资源",trigger:"change"}],desc:[{required:!0,message:"请填写活动形式",trigger:"blur"}]}},OVQD:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var o=a("rVsN"),l=a.n(o),r=a("yEoQ"),n=a.n(r),i={ORDERINFO:"../../orderInfo",ORDERSCHEDULE:"../../orderSchedule"},s=function(e){var t=e.name.toUpperCase(),a=i[t],o=null;switch(e.method.toUpperCase()){case"GET":o=n.a.get(a+"/list.do");break;case"ADD":o=n.a.post(a+"/insert.do",{data:e.data});break;case"DELETE":o=n.a.post(a+"/deleteBatch.do",{data:e.data});break;case"EDIT":o=n.a.post(a+"/update.do",{data:e.data});break;default:o=l.a.reject(new Error("请求参数有误"))}return o}},TqVl:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a.d(t,"orderInfo",function(){return o}),a.d(t,"orderSchedule",function(){return l});var o=[{autoComplete:!0,sortable:!0,field:"orderNo",title:"订单号",width:100,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""},{autoComplete:!0,sortable:!0,field:"productName",title:"产品名称",width:120,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""},{autoComplete:!1,sortable:!0,field:"orderAmount",title:"订单数量",width:100,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""},{autoComplete:!1,sortable:!0,field:"stockAmount",title:"库存",width:60,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""},{autoComplete:!1,sortable:!0,field:"spareParts",title:"备品",width:60,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""},{autoComplete:!1,sortable:!0,field:"planAmount",title:"需生产数",width:100,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""},{autoComplete:!1,sortable:!0,field:"orderDate",title:"下单日期",width:100,componentTag:"el-date-picker",rule:"name",placeholder:"请输入",type:"date"},{autoComplete:!1,sortable:!0,field:"requiredDate",title:"要求交货日期",width:100,componentTag:"el-date-picker",rule:"name",placeholder:"请输入",type:"date"},{autoComplete:!1,sortable:!0,field:"replyDate",title:"交期",width:100,componentTag:"el-date-picker",rule:"name",placeholder:"请输入",type:"date"},{autoComplete:!1,sortable:!0,field:"purchaseRequirement",title:"特别要求",width:180,componentTag:"el-input",rule:"name",placeholder:"请输入",type:"textarea"},{autoComplete:!0,sortable:!0,field:"materialCoding",title:"物料长代码",width:100,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""},{autoComplete:!0,sortable:!0,field:"materialModel",title:"规格型号",width:100,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""},{autoComplete:!0,sortable:!0,field:"orderStatus",title:"生产状态",width:100,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""},{autoComplete:!0,sortable:!0,field:"remark",title:"备注",width:140,componentTag:"el-input",rule:"name",placeholder:"请输入",type:"textarea"},{autoComplete:!0,sortable:!0,field:"exceptionReason",title:"异常原因",width:100,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""},{autoComplete:!0,sortable:!0,field:"orderType",title:"订单类型",width:100,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""},{autoComplete:!1,sortable:!0,field:"price",title:"单价",width:80,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""}],l=[{autoComplete:!0,sortable:!0,field:"orderNo",title:"订单号",width:100,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""},{autoComplete:!0,sortable:!0,field:"productName",title:"产品名称",width:120,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""},{autoComplete:!1,sortable:!0,field:"batch",title:"批次",width:60,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""},{autoComplete:!1,sortable:!0,field:"reciverOrder",title:"下单日期",width:100,componentTag:"el-date-picker",rule:"name",placeholder:"请输入",type:"date"},{autoComplete:!1,sortable:!0,field:"planProductTime",title:"计划生产开始时间",width:100,componentTag:"el-date-picker",rule:"name",placeholder:"请输入",type:"date"},{autoComplete:!1,sortable:!0,field:"productStatus",title:"生产开始状态",width:60,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""},{autoComplete:!1,sortable:!0,field:"planProductFinish",title:"计划生产完成时间",width:100,componentTag:"el-date-picker",rule:"name",placeholder:"请输入",type:"date"},{autoComplete:!1,sortable:!0,field:"productFinishStatus",title:"生产完成状态",width:60,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""},{autoComplete:!1,sortable:!0,field:"planOrderFinish",title:"订单计划完成时间",width:100,componentTag:"el-date-picker",rule:"name",placeholder:"请输入",type:"date"},{autoComplete:!1,sortable:!0,field:"orderFinishStatus",title:"订单完成状态",width:60,componentTag:"el-input",rule:"name",placeholder:"请输入",type:""}]},ixd3:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasGetData,expression:"hasGetData"}],staticClass:"table my-datagrid"},[a("el-row",{staticClass:"edit-button"},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[a("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-plus",round:""},on:{click:e.addHandler}},[e._v("\n          新增一行\n        ")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"danger",icon:"el-icon-delete",round:""},on:{click:e.batchDeleteHandler}},[e._v("\n          批量删除\n        ")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"warning",round:""},on:{click:e.reloadHandler}},[e._v("\n          重新加载\n        ")])],1)]),e._v(" "),a("el-col",{attrs:{span:12,offset:0}},[a("el-form",{ref:"searchForm",staticClass:"inline-form",attrs:{inline:""}},[a("el-form-item",[a("el-popover",{attrs:{placement:"bottom","popper-class":"auto-complete",trigger:"focus"}},[a("ul",{on:{wheel:function(t){t.preventDefault(),e.autoCompleteWheel(t)}}},e._l(e.autoCompleteValueArr,function(t,o){return a("li",{key:o,attrs:{value:t},on:{click:function(t){t.preventDefault(),e.autoCompleteClick(t)}}},[e._v("\n                "+e._s(t)+"\n              ")])})),e._v(" "),a("el-input",{attrs:{slot:"reference",spellcheck:"false",placeholder:"请输入内容"},on:{focus:function(t){e.autoCompleteFocus({targetObj:"searchForm",targetKey:"value",sourceKey:e.searchForm.valueType})}},slot:"reference",model:{value:e.searchForm.value,callback:function(t){e.$set(e.searchForm,"value","string"==typeof t?t.trim():t)},expression:"searchForm.value"}},[a("el-select",{staticClass:"my-select-type",attrs:{slot:"prepend",filterable:"",placeholder:"请先选择搜索类型"},on:{change:e.changeKeyValue},slot:"prepend",model:{value:e.searchForm.valueType,callback:function(t){e.$set(e.searchForm,"valueType",t)},expression:"searchForm.valueType"}},e._l(e.searchForm.valueTypeArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){t.preventDefault(),e.offlineSearch(t)}},slot:"append"})],1)],1)],1)],1)],1)],1),e._v(" "),a("el-table",{attrs:{data:e.datagridData,border:"",stripe:"","empty-text":" ",height:e.tableHeight},on:{select:e.selected,"select-all":e.selected}},[a("el-table-column",{attrs:{type:"index",width:"19"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"19"}}),e._v(" "),e._l(e.datagridConfig,function(t){return a("el-table-column",{key:t.field,attrs:{prop:t.field,label:t.title,formatter:e.tableFormat,sortable:t.sortable,"show-overflow-tooltip":"",width:t.width}})}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.editHandler(t.$index,t.row)}}},[e._v("\n          编辑\n        ")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.deleteHandler(t.$index,t.row)}}},[e._v("\n          删除\n        ")])]}}])})],2),e._v(" "),a("div",{staticClass:"dialogContain"},[a("el-dialog",{attrs:{title:e.dialogTitle,center:"","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"140px"}},[e._l(e.datagridConfig,function(t,o){return a("el-form-item",{key:t.field,attrs:{label:t.title,prop:t.rule}},[t.autoComplete?a("el-popover",{attrs:{placement:"bottom","popper-class":"auto-complete","visible-arrow":"",trigger:"focus"}},[a("ul",{on:{wheel:function(t){t.preventDefault(),e.autoCompleteWheel(t)}}},e._l(e.autoCompleteValueArr,function(t,o){return a("li",{key:o,attrs:{value:t},on:{click:function(t){t.preventDefault(),e.autoCompleteClick(t)}}},[e._v("\n                "+e._s(t)+"\n              ")])})),e._v(" "),a("el-input",{attrs:{slot:"reference",placeholder:t.placeholder,spellcheck:"false"},on:{focus:function(a){e.autoCompleteFocus({targetObj:"form",targetKey:t.field,sourceKey:t.field})}},slot:"reference",model:{value:e.form[t.field],callback:function(a){e.$set(e.form,t.field,a)},expression:"form[item.field]"}})],1):a(t.componentTag,{tag:"component",attrs:{spellcheck:"false",type:t.type,placeholder:t.placeholder},model:{value:e.form[t.field],callback:function(a){e.$set(e.form,t.field,a)},expression:"form[item.field]"}})],1)}),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"表id"}},[a("el-input",{model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1)],2),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveRow}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)],1)],1)],1)},l=[],r={render:o,staticRenderFns:l};t.a=r},o50x:function(e,t,a){"use strict";function o(e){a("xjCN")}Object.defineProperty(t,"__esModule",{value:!0});var l=a("zsio"),r=a("ixd3"),n=a("0HdQ"),i=o,s=n(l.a,r.a,!1,i,"data-v-30a98806",null);t.default=s.exports},xjCN:function(e,t,a){var o=a("yil3");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("8bSs")("2f47580a",o,!0)},yil3:function(e,t,a){t=e.exports=a("BkJT")(!0),t.push([e.i,".edit-button[data-v-30a98806]{height:50px;overflow:auto}.inline-form[data-v-30a98806]{height:50px}","",{version:3,sources:["F:/demo/vueDemo/vue+vue-router+vuex+axios+element-ui+mock-demo/src/components/main/views/Table.vue"],names:[],mappings:"AACA,8BACE,YAAa,AACb,aAAe,CAChB,AAED,8BACE,WAAa,CACd",file:"Table.vue",sourcesContent:["\n.edit-button[data-v-30a98806] {\n  height: 50px;\n  overflow: auto;\n}\n/*行内表单的高度*/\n.inline-form[data-v-30a98806] {\n  height: 50px;\n}\n"],sourceRoot:""}])},zsio:function(e,t,a){"use strict";var o=a("OVQD"),l=a("8ZxV"),r=a("TqVl");t.a={data:function(){return{datagridConfig:[],hasGetData:!1,dialogFormVisible:!1,sourceData:[],searchForm:{isSearch:!1,valueType:"orderNo",valueTypeArr:[{value:"orderNo",label:"订单号"},{value:"productName",label:"产品名称"}],value:"",searchValue:""},selection:[],editRow:{},requestParams:{method:"GET",name:"orderInfo",params:{ids:""},data:{}},dialogTitle:"新增信息",form:{id:""},rules:{},autoComplete:{orderNo:[],productName:[]},autoCompleteConfig:{sliceBegin:0,showLen:5,resultLen:-1},autoCompleteTarget:{targetObj:"",targetKey:"",sourceKey:""},format:{date:[]}}},computed:{datagridData:function(){var e=this.searchForm,t=this.sourceData,a=e.valueType,o=e.searchValue;return e.isSearch&&""!==o&&(t=t.filter(function(e){return e[a]==o}),this.searchForm.searchValue="",this.searchForm.isSearch=!1),t},autoCompleteValueArr:function(){var e,t,a=this.autoComplete,o=this.autoCompleteConfig,l=this.autoCompleteTarget,r=o.sliceBegin,n=r+o.showLen;return l.targetObj&&l.targetKey&&l.sourceKey?(e=this[l.targetObj][l.targetKey],t=a[l.sourceKey]):(e="",t=a.orderNo),t=0!==e.length?t.filter(function(t){return-1!=(t+"").toLowerCase().indexOf((""+e).toLowerCase())}):t,this.autoCompleteConfig.resultLen=t.length,t.slice(r,n)},tableHeight:function(){return document.body.clientHeight||document.documentElement.clientHeight-240}},methods:{getData:function(){var e=this;this.requestParams.method="get",Object(o.a)(this.requestParams).then(function(t){t&&t.data&&t.data.tableInfo?(e.sourceData=t.data.tableInfo,e.hasGetData=!0,e.setAutoList()):console.log("后台返回数据有误！")},function(t){e.$alert("获取表格数据失败，请稍后重试或者联系管理员。","错误",{confirmButtonText:"确定",callback:function(t){e.$message({type:"info",message:"action: "+t})}})})},changeKeyValue:function(e){this.searchForm.valueType=e,this.searchForm.value="",this.searchForm.searchValue="",this.autoCompleteTarget.sourceKey=e},offlineSearch:function(e){this.searchForm.searchValue=this.searchForm.value,this.searchForm.isSearch=!0},setAutoList:function(){for(var e=this.sourceData,t=(this.datagridConfig,{}),a=0,o=e.length;a<o;a++)for(var l in this.autoComplete)t[l]||(t[l]={}),t[l][e[a][l]]||(t[l][e[a][l]]=!0,this.autoComplete[l].push(e[a][l]))},autoCompleteFocus:function(e){this.autoCompleteTarget.targetObj=e.targetObj,this.autoCompleteTarget.targetKey=e.targetKey,this.autoCompleteTarget.sourceKey=e.sourceKey?e.sourceKey:e.targetKey},autoCompleteWheel:function(e){var t=this.autoCompleteConfig,a=t.sliceBegin,o=a+t.showLen,l=t.resultLen;e.deltaY>0&&o<l?this.autoCompleteConfig.sliceBegin++:e.deltaY<0&&a>0&&this.autoCompleteConfig.sliceBegin--},autoCompleteClick:function(e){var t=e.srcElement.innerText,a=this.autoCompleteTarget.targetObj,o=this.autoCompleteTarget.targetKey;this[a][o]=t,this.autoCompleteConfig.sliceBegin=0},selected:function(e){this.selection=e},addHandler:function(){this.dialogFormVisible=!0,this.requestParams.method="add"},deleteHandler:function(e,t){var a=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.requestParams.method="delete",a.requestParams.data={ids:t.id},Object(o.a)(a.requestParams).then(function(e){if(e.status>=200&&e.status<=300){var o=(e.data.msg,0);o=a.sourceData.indexOf(t),a.sourceData.splice(o,1),a.setAutoList(),a.$message({type:"success",message:"第- "+o+" -条数据删除成功！"})}},function(e){a.$message({type:"info",message:"删除失败！"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},batchDeleteHandler:function(){for(var e=this,t=this.selection,a=t.length,l=[],r="",n=0;n<a;n++)l.push(t[n].id);r=l.join(","),this.$confirm("您选中了- "+a+" -条数据！此操作将永久删除这些数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.requestParams.method="delete",e.requestParams.data={ids:r},Object(o.a)(e.requestParams).then(function(o){if(o.status>=200&&o.status<=300){for(var l=(o.data.msg,0),r=0;r<a;r++)l=e.sourceData.indexOf(t[r]),e.sourceData.splice(l,1);e.setAutoList(),e.$message({type:"success",message:"共- "+a+" -条数据删除成功！"})}},function(t){e.$message({type:"info",message:"删除失败！"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},editHandler:function(e,t){for(var a in this.form)this.form[a]=t[a];this.dialogFormVisible=!0,this.requestParams.method="edit",this.editRow=t},saveRow:function(){var e=this;this.$refs.form.validate(function(t){var a={};t?(e.requestParams.data=e.form,Object(o.a)(e.requestParams).then(function(t){if(t.status>=200&&t.status<=300){var o=t.data.msg,l=0;for(var r in e.form)a[r]=e.form[r];"edit"==e.requestParams.method?(l=e.sourceData.indexOf(e.editRow),e.sourceData.splice(l,1,a)):e.sourceData.splice(0,0,a),e.setAutoList(),e.$message({type:"success",message:o+"数据保存成功！"}),e.dialogFormVisible=!1}},function(t){e.$message({type:"info",message:"数据保存失败！"})})):e.$message({type:"info",message:"数据验证失败，请检查数据！！"})})},reloadHandler:function(){var e=this;this.$confirm("此操作将重新从后台请求数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.getData()}).catch(function(){e.$message({type:"info",message:"已取消操作"})})},tableFormat:function(e,t,a){var o="",l=null;return this.format.date.indexOf(t.property)>=0&&(a?(l=new Date(a),o=l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate()):o="",a=o),a}},mounted:function(){var e=this;this.$nextTick(function(){e.requestParams.name=e.$route.name;var t=r[e.$route.name];if(e.datagridConfig=t,!t)return void e.$router.replace({name:"404"});for(var a=0;a<t.length;a++)t[a].type.indexOf("date")>=0&&e.format.date.splice(0,0,t[a].field),e.$set(e.form,t[a].field,""),t[a].autoComplete&&!e.autoComplete[t[a].field]&&e.$set(e.autoComplete,t[a].field,[]);e.getData(),e.rules=l.a})}}}});
//# sourceMappingURL=1.9725a2d58f0b430bc463.js.map